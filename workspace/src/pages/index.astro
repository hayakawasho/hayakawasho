---
import Home from "../_components/page/home/index.page";
import Head from "../_components/ui/layout/head.astro";
import Seo from "../_components/ui/layout/seo.astro";
import { WorkDataMap } from "../_models/work/mapper";
import { WorkRepository } from "../_repositories/work/repository";

const repository = new WorkRepository();
const result = await repository.findAll();

const posts = result.works.map(WorkDataMap.toDTO);
---

<!DOCTYPE html>
<html
  lang="ja"
  style={`${posts[0].theme === "light"
    ? "--theme-text: var(--color-dark); --theme-bg: var(--color-light);"
    : "--theme-text: var(--color-light); --theme-bg: var(--color-dark);"
  }`}
>
  <Head>
    <Seo title="" url="" />
  </Head>
  <Home allPosts={posts} />
</html>
